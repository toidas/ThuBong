{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\project\\\\nextJS\\\\ThuBong\\\\components\\\\ChangePassPopup.js\";\nimport React from \"react\";\nimport Layout from '../components/MyLayout.js';\nimport Link from 'next/link';\nimport UserService from '../service/UserService.js';\nimport Environment from '../config/Environment.js';\nimport Router from 'next/router';\nimport jsCookie from 'js-cookie';\nimport Head from 'next/head';\nimport Popup from \"reactjs-popup\";\nvar passwordDiv = {\n  marginTop: \"10px\"\n};\nvar formDiv = {\n  marginLeft: \"50px\"\n};\nvar inputCss = {\n  marginLeft: \"10px\"\n};\n\nvar ChangePassPopup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ChangePassPopup, _React$Component);\n\n  function ChangePassPopup(props) {\n    var _this;\n\n    _classCallCheck(this, ChangePassPopup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChangePassPopup).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"checkString\", function (text) {\n      if (text.trim() === \"\") {\n        return false;\n      }\n\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    });\n\n    _this.state = {\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmNewPassword: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(ChangePassPopup, [{\n    key: \"changePassword\",\n    value: function () {\n      var _changePassword = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var currentPassword, newPassword, confirmNewPassword, data, json;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                currentPassword = this.state.currentPassword;\n                newPassword = this.state.newPassword;\n                confirmNewPassword = this.state.confirmNewPassword;\n\n                if (!(newPassword.length < 4)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                alert(\"Password cần lớn hơn 4 ký tự\");\n                return _context.abrupt(\"return\");\n\n              case 6:\n                if (!(newPassword !== confirmNewPassword)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                alert(\"new password và confim phải giống nhau\");\n                return _context.abrupt(\"return\");\n\n              case 9:\n                data = {\n                  \"newPassword\": newPassword,\n                  \"oldPassword\": currentPassword\n                };\n                _context.next = 12;\n                return UserService.changePass(data, this.props.token);\n\n              case 12:\n                json = _context.sent;\n\n                if (json.code == 200) {\n                  alert(\"thay đổi mật khẩu thành công\");\n                  this.setState({\n                    currentPassword: \"\",\n                    newPassword: \"\",\n                    confirmNewPassword: \"\"\n                  });\n                } else {\n                  alert(\"mật khẩu cũ không đúng\");\n                }\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function changePassword() {\n        return _changePassword.apply(this, arguments);\n      }\n\n      return changePassword;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        style: formDiv,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"title\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Thay \\u0111\\u1ED5i Password\"), React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n        integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n        crossorigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), React.createElement(\"script\", {\n        src: \"https://code.jquery.com/jquery-3.3.1.slim.min.js\",\n        integrity: \"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\",\n        crossorigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"script\", {\n        src: \"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\",\n        integrity: \"sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1\",\n        crossorigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(\"script\", {\n        src: \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\",\n        integrity: \"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM\",\n        crossorigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Thay \\u0111\\u1ED5i Password\"), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Current Password :\", React.createElement(\"input\", {\n        style: inputCss,\n        type: \"text\",\n        name: \"currentPassword\",\n        value: this.state.currentPassword,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: passwordDiv,\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"New Password :\", React.createElement(\"input\", {\n        style: inputCss,\n        type: \"text\",\n        name: \"newPassword\",\n        value: this.state.newPassword,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: passwordDiv,\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Confirm New Password:\", React.createElement(\"input\", {\n        style: inputCss,\n        type: \"text\",\n        name: \"confirmNewPassword\",\n        value: this.state.confirmNewPassword,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: passwordDiv,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-primary\",\n        onClick: this.changePassword.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Submit\"))));\n    }\n  }]);\n\n  return ChangePassPopup;\n}(React.Component);\n\nexport { ChangePassPopup as default };","map":{"version":3,"sources":["D:\\project\\nextJS\\ThuBong\\components\\ChangePassPopup.js"],"names":["Layout","Link","UserService","Environment","Router","jsCookie","Head","Popup","passwordDiv","marginTop","formDiv","marginLeft","inputCss","ChangePassPopup","props","text","trim","event","setState","target","name","value","state","currentPassword","newPassword","confirmNewPassword","length","alert","data","changePass","token","json","code","onChange","changePassword","bind","React","Component"],"mappings":"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","sourcesContent":["import Layout from '../components/MyLayout.js';\r\nimport Link from 'next/link';\r\nimport UserService from '../service/UserService.js';\r\nimport Environment from '../config/Environment.js';\r\nimport Router from 'next/router'\r\nimport jsCookie from 'js-cookie';\r\nimport Head from 'next/head';\r\nimport Popup from \"reactjs-popup\";\r\n\r\nconst passwordDiv = {\r\n    marginTop: \"10px\"\r\n}\r\n\r\nconst formDiv = {\r\n    marginLeft: \"50px\"\r\n}\r\n\r\nconst inputCss = {\r\n    marginLeft: \"10px\"\r\n}\r\n\r\nexport default class ChangePassPopup extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = ({\r\n            currentPassword: \"\",\r\n            newPassword: \"\",\r\n            confirmNewPassword: \"\"\r\n        })\r\n    }\r\n\r\n    checkString = text => {\r\n        if (text.trim() === \"\") {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    onChange = (event) => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    }\r\n\r\n    async changePassword(){\r\n        let currentPassword = this.state.currentPassword;\r\n        let newPassword = this.state.newPassword;\r\n        let confirmNewPassword = this.state.confirmNewPassword;\r\n\r\n        if(newPassword.length < 4){\r\n            alert(\"Password cần lớn hơn 4 ký tự\");\r\n            return;\r\n        }\r\n\r\n        if(newPassword !== confirmNewPassword){\r\n            alert(\"new password và confim phải giống nhau\");\r\n            return;\r\n        }\r\n\r\n        let data = {\r\n            \"newPassword\": newPassword,\r\n            \"oldPassword\": currentPassword\r\n        }\r\n\r\n        const json = await UserService.changePass(data,this.props.token);\r\n        if(json.code == 200){\r\n            alert(\"thay đổi mật khẩu thành công\");\r\n            this.setState({\r\n                currentPassword: \"\",\r\n                newPassword: \"\",\r\n                confirmNewPassword: \"\"\r\n            })\r\n        }else{\r\n            alert(\"mật khẩu cũ không đúng\");\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n                <div style={formDiv}>\r\n                    <Head>\r\n                        <title>Thay đổi Password</title>\r\n                        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\" />\r\n                        <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" crossorigin=\"anonymous\"></script>\r\n                        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\" integrity=\"sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1\" crossorigin=\"anonymous\"></script>\r\n                        <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\" integrity=\"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM\" crossorigin=\"anonymous\"></script>\r\n                    </Head>\r\n                    <br></br>\r\n                    <h1>Thay đổi Password</h1>\r\n                    <form>\r\n                        <div class=\"form-group\">\r\n                            Current Password :\r\n            <input style={inputCss} type=\"text\" name=\"currentPassword\" value={this.state.currentPassword} onChange={this.onChange}/>\r\n                        </div>\r\n                        <div style={passwordDiv} class=\"form-group\">\r\n                            New Password :\r\n            <input style={inputCss} type=\"text\" name=\"newPassword\" value={this.state.newPassword} onChange={this.onChange} />\r\n                        </div>\r\n                        <div style={passwordDiv} class=\"form-group\">\r\n                            Confirm New Password:\r\n            <input style={inputCss} type=\"text\" name=\"confirmNewPassword\" value={this.state.confirmNewPassword} onChange={this.onChange} />\r\n                        </div>\r\n                        <div style={passwordDiv} >\r\n                            <button type=\"button\" class=\"btn btn-primary\" onClick={this.changePassword.bind(this)}>Submit</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}