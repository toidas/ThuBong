{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\project\\\\nextJS\\\\ThuBong\\\\components\\\\AddBillPopup.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport BillService from '../service/BillService.js';\nimport ProductService from '../service/ProductService.js';\nvar inputStyleCorrect = {\n  background: \"white\"\n};\nvar inputStyleInCorrect = {\n  background: \"red\"\n};\n\nvar AddBillPopup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AddBillPopup, _React$Component);\n\n  function AddBillPopup(props) {\n    var _this;\n\n    _classCallCheck(this, AddBillPopup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddBillPopup).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"checkString\", function (text) {\n      if (text == null) {\n        return false;\n      }\n\n      if (text.trim() === \"\") {\n        return false;\n      }\n\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"submitProduct\", function () {\n      var productList = [];\n\n      _this.state.products.map(function (item) {\n        if (item.idProduct == null) {\n          alert('cần chọn sản phẩm đúng');\n          return;\n        }\n\n        if (!_this.checkString(item.amount + \"\")) {\n          alert('cần điền đầy đủ số lượng mỗi loại của sản phẩm');\n          return;\n        }\n\n        if (!_this.checkNumber(item.amount)) {\n          alert('số lượng cần là chữ số');\n          return;\n        }\n\n        var cItem = {\n          \"amount\": item.amount,\n          \"id\": item.idProduct\n        };\n        productList.push(cItem);\n      }); //console.log(productList);\n\n\n      if (!_this.checkString(_this.state.name) || !_this.checkString(_this.state.price + \"\")) {\n        alert('cần điền đầy đủ các trường');\n        return;\n      }\n\n      if (!_this.checkNumber(_this.state.price)) {\n        alert('giá cần là chữ số');\n        return;\n      }\n\n      var data = null;\n\n      if (_this.state.id == null || _this.state.id == \"\") {\n        data = {\n          \"name\": _this.state.name,\n          \"price\": _this.state.price,\n          \"listProduct\": productList,\n          \"customerName\": _this.state.customerName,\n          \"customerPhone\": _this.state.customerPhone,\n          \"type\": _this.props.kind\n        };\n      } else {\n        data = {\n          \"name\": _this.state.name,\n          \"price\": _this.state.price,\n          \"listProduct\": productList,\n          \"customerName\": _this.state.customerName,\n          \"customerPhone\": _this.state.customerPhone,\n          \"type\": _this.props.kind,\n          \"id\": _this.state.id\n        };\n      }\n\n      console.log(data);\n\n      _this.setState({\n        id: \"\",\n        name: \"\",\n        price: \"\",\n        customerPhone: \"\",\n        customerName: \"\",\n        products: []\n      });\n\n      BillService.updateBill(data, _this.props.token).then(function (result) {\n        alert('update hóa đơn thành công');\n        console.log(result);\n      }).catch(function (error) {\n        alert('update hóa đơn bị lỗi');\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChangeProduct\", function (event) {\n      //console.log(event.target.name)\n      var productList = _this.state.products;\n      productList[event.target.name].amount = event.target.value;\n\n      _this.setState({\n        products: productList\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addProduct\", function () {\n      var product = {\n        idProduct: null,\n        nameProduct: '',\n        amount: 0\n      };\n      var productList = _this.state.products;\n      productList.push(product);\n\n      _this.setState({\n        products: productList\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteProduct\", function () {\n      //console.log(event.target.name)\n      var productList = _this.state.products;\n      productList.splice(event.target.name, 1);\n\n      _this.setState({\n        products: productList\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showMenu\", function (event, index) {\n      var productList = _this.state.products;\n      productList[index].nameProduct = event.target.value;\n      productList[index].idProduct = null;\n\n      _this.setState({\n        products: productList\n      });\n\n      _this.getProduct(event.target.value);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseEnterHandler\", function (event, index) {\n      event.preventDefault();\n\n      _this.getProduct(_this.state.products[index].nameProduct);\n\n      _this.setState({\n        showMenu: true,\n        indexShowDropDown: index\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseLeaveHandler\", function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        showMenu: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"choiceItem\", function (event, eItem, index) {\n      //console.log(this.state.items);\n      var productList = _this.state.products;\n      productList[index].nameProduct = eItem.name;\n      productList[index].idProduct = eItem.id; //console.log(eItem.id);\n\n      _this.setState({\n        products: productList,\n        showMenu: false\n      });\n    });\n\n    _this.state = {\n      id: \"\",\n      name: \"\",\n      products: [],\n      amount: \"\",\n      price: \"\",\n      showMenu: false,\n      indexShowDropDown: -1,\n      items: [],\n      customerName: \"\",\n      customerPhone: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(AddBillPopup, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var billProduct = [];\n\n      if (this.props.item == null) {\n        return;\n      }\n\n      if (this.props.item.billProduct != null) {\n        this.props.item.billProduct.map(function (item) {\n          var eItem = {\n            idProduct: item.product.id,\n            nameProduct: item.product.name,\n            amount: item.amount\n          };\n          billProduct.push(eItem);\n        });\n      }\n\n      if (this.props.item != null) {\n        this.setState({\n          id: this.props.item.id,\n          name: this.props.item.name,\n          price: this.props.item.price,\n          customerName: this.props.item.customerName,\n          customerPhone: this.props.item.customerPhone,\n          products: billProduct\n        });\n      }\n    }\n  }, {\n    key: \"getProduct\",\n    value: function () {\n      var _getProduct = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(name) {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return ProductService.getProductByName(name, this.props.token);\n\n              case 2:\n                json = _context.sent;\n                //console.log(json.content);\n                this.setState({\n                  items: json.content\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getProduct(_x) {\n        return _getProduct.apply(this, arguments);\n      }\n\n      return getProduct;\n    }()\n  }, {\n    key: \"checkNumber\",\n    value: function checkNumber(number) {\n      if (number == null) {\n        return false;\n      }\n\n      var isnum = /^\\d+$/.test(number);\n      return isnum;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Update H\\xF3a \\u0110\\u01A1n\"), React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"Type:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        value: this.props.kind,\n        onChange: this.onChange,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }))), this.state.id === \"\" ? null : React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"ID:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"id\",\n        value: this.state.id,\n        onChange: this.onChange,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \"T\\xEAn H\\xF3a \\u0110\\u01A1n:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        value: this.state.name,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"T\\xEAn Kh\\xE1ch H\\xE0ng:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"customerName\",\n        value: this.state.customerName,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, \"SDT Kh\\xE1ch H\\xE0ng:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"customerPhone\",\n        value: this.state.customerPhone,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, \"Gi\\xE1:\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"price\",\n        value: this.state.price,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }))))), React.createElement(\"table\", {\n        border: \"1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, \"T\\xEAn SP\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, \"S\\u1ED1 l\\u01B0\\u1EE3ng\")), this.state.products.map(function (eItem, keyProduct) {\n        return React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          onMouseEnter: function onMouseEnter(evt) {\n            return _this2.onMouseEnterHandler(evt, keyProduct);\n          },\n          onMouseLeave: _this2.onMouseLeaveHandler,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          style: _this2.state.products[keyProduct].idProduct != null ? inputStyleCorrect : inputStyleInCorrect,\n          type: \"text\",\n          onChange: function onChange(evt) {\n            return _this2.showMenu(evt, keyProduct);\n          },\n          value: _this2.state.products[keyProduct].nameProduct,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 303\n          },\n          __self: this\n        }), _this2.state.showMenu && keyProduct == _this2.state.indexShowDropDown ? React.createElement(\"div\", {\n          className: \"jsx-62654344\" + \" \" + \"menu\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, React.createElement(_JSXStyle, {\n          id: \"62654344\",\n          __self: this\n        }, \".menu.jsx-62654344{background:#FFFFFF;position:absolute;z-index:1;width:30%;}.jsx-62654344,.item.jsx-62654344{width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxwcm9qZWN0XFxuZXh0SlNcXFRodUJvbmdcXGNvbXBvbmVudHNcXEFkZEJpbGxQb3B1cC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFvVGdFLEFBR2dGLEFBTVIsV0FDZixRQU5zQixrQkFDUixVQUNBLFVBQ2QiLCJmaWxlIjoiRDpcXHByb2plY3RcXG5leHRKU1xcVGh1Qm9uZ1xcY29tcG9uZW50c1xcQWRkQmlsbFBvcHVwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJpbGxTZXJ2aWNlIGZyb20gJy4uL3NlcnZpY2UvQmlsbFNlcnZpY2UuanMnO1xyXG5pbXBvcnQgUHJvZHVjdFNlcnZpY2UgZnJvbSAnLi4vc2VydmljZS9Qcm9kdWN0U2VydmljZS5qcyc7XHJcblxyXG5jb25zdCBpbnB1dFN0eWxlQ29ycmVjdCA9IHtcclxuICAgIGJhY2tncm91bmQ6IFwid2hpdGVcIlxyXG59XHJcblxyXG5jb25zdCBpbnB1dFN0eWxlSW5Db3JyZWN0ID0ge1xyXG4gICAgYmFja2dyb3VuZDogXCJyZWRcIlxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZGRCaWxsUG9wdXAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgaWQ6IFwiXCIsXHJcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgICAgIHByb2R1Y3RzOiBbXSxcclxuICAgICAgICAgICAgYW1vdW50OiBcIlwiLFxyXG4gICAgICAgICAgICBwcmljZTogXCJcIixcclxuICAgICAgICAgICAgc2hvd01lbnU6IGZhbHNlLFxyXG4gICAgICAgICAgICBpbmRleFNob3dEcm9wRG93bjogLTEsXHJcbiAgICAgICAgICAgIGl0ZW1zOiBbXSxcclxuICAgICAgICAgICAgY3VzdG9tZXJOYW1lOiBcIlwiLFxyXG4gICAgICAgICAgICBjdXN0b21lclBob25lOiBcIlwiXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICAgICAgbGV0IGJpbGxQcm9kdWN0ID0gW11cclxuICAgICAgICBpZih0aGlzLnByb3BzLml0ZW0gPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5wcm9wcy5pdGVtLmJpbGxQcm9kdWN0ICE9IG51bGwpe1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLml0ZW0uYmlsbFByb2R1Y3QubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZUl0ZW0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRQcm9kdWN0OiBpdGVtLnByb2R1Y3QuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVByb2R1Y3Q6IGl0ZW0ucHJvZHVjdC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogaXRlbS5hbW91bnRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJpbGxQcm9kdWN0LnB1c2goZUl0ZW0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLnByb3BzLml0ZW0gIT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMucHJvcHMuaXRlbS5pZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMucHJvcHMuaXRlbS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6IHRoaXMucHJvcHMuaXRlbS5wcmljZSxcclxuICAgICAgICAgICAgICAgIGN1c3RvbWVyTmFtZTogdGhpcy5wcm9wcy5pdGVtLmN1c3RvbWVyTmFtZSxcclxuICAgICAgICAgICAgICAgIGN1c3RvbWVyUGhvbmU6IHRoaXMucHJvcHMuaXRlbS5jdXN0b21lclBob25lLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdHMgOiBiaWxsUHJvZHVjdFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRQcm9kdWN0KG5hbWUpIHtcclxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgUHJvZHVjdFNlcnZpY2UuZ2V0UHJvZHVjdEJ5TmFtZShuYW1lLHRoaXMucHJvcHMudG9rZW4pO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coanNvbi5jb250ZW50KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaXRlbXM6IGpzb24uY29udGVudCB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY2hlY2tOdW1iZXIobnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKG51bWJlciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGlzbnVtID0gL15cXGQrJC8udGVzdChudW1iZXIpO1xyXG4gICAgICAgIHJldHVybiBpc251bTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja1N0cmluZyA9IHRleHQgPT4ge1xyXG4gICAgICAgIGlmICh0ZXh0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGV4dC50cmltKCkgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgc3VibWl0UHJvZHVjdCA9ICgpID0+IHtcclxuXHJcbiAgICAgICAgbGV0IHByb2R1Y3RMaXN0ID0gW107XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5wcm9kdWN0cy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uaWRQcm9kdWN0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KCdj4bqnbiBjaOG7jW4gc+G6o24gcGjhuqltIMSRw7puZycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tTdHJpbmcoaXRlbS5hbW91bnQgKyBcIlwiKSkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoJ2PhuqduIMSRaeG7gW4gxJHhuqd5IMSR4bunIHPhu5EgbMaw4bujbmcgbeG7l2kgbG/huqFpIGPhu6dhIHPhuqNuIHBo4bqpbScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tOdW1iZXIoaXRlbS5hbW91bnQpKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnc+G7kSBsxrDhu6NuZyBj4bqnbiBsw6AgY2jhu68gc+G7kScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgY0l0ZW0gPSB7XHJcbiAgICAgICAgICAgICAgICBcImFtb3VudFwiOiBpdGVtLmFtb3VudCxcclxuICAgICAgICAgICAgICAgIFwiaWRcIjogaXRlbS5pZFByb2R1Y3RcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHJvZHVjdExpc3QucHVzaChjSXRlbSk7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhwcm9kdWN0TGlzdCk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jaGVja1N0cmluZyh0aGlzLnN0YXRlLm5hbWUpIHx8ICF0aGlzLmNoZWNrU3RyaW5nKHRoaXMuc3RhdGUucHJpY2UrXCJcIikpIHtcclxuICAgICAgICAgICAgYWxlcnQoJ2PhuqduIMSRaeG7gW4gxJHhuqd5IMSR4bunIGPDoWMgdHLGsOG7nW5nJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jaGVja051bWJlcih0aGlzLnN0YXRlLnByaWNlKSkge1xyXG4gICAgICAgICAgICBhbGVydCgnZ2nDoSBj4bqnbiBsw6AgY2jhu68gc+G7kScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBkYXRhID0gbnVsbDtcclxuICAgICAgICBpZih0aGlzLnN0YXRlLmlkID09IG51bGwgfHwgdGhpcy5zdGF0ZS5pZCA9PSBcIlwiKXtcclxuICAgICAgICAgICAgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiB0aGlzLnN0YXRlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBcInByaWNlXCI6IHRoaXMuc3RhdGUucHJpY2UsXHJcbiAgICAgICAgICAgICAgICBcImxpc3RQcm9kdWN0XCI6IHByb2R1Y3RMaXN0LFxyXG4gICAgICAgICAgICAgICAgXCJjdXN0b21lck5hbWVcIjogdGhpcy5zdGF0ZS5jdXN0b21lck5hbWUsXHJcbiAgICAgICAgICAgICAgICBcImN1c3RvbWVyUGhvbmVcIjogdGhpcy5zdGF0ZS5jdXN0b21lclBob25lLFxyXG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IHRoaXMucHJvcHMua2luZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogdGhpcy5zdGF0ZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgXCJwcmljZVwiOiB0aGlzLnN0YXRlLnByaWNlLFxyXG4gICAgICAgICAgICAgICAgXCJsaXN0UHJvZHVjdFwiOiBwcm9kdWN0TGlzdCxcclxuICAgICAgICAgICAgICAgIFwiY3VzdG9tZXJOYW1lXCI6IHRoaXMuc3RhdGUuY3VzdG9tZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgXCJjdXN0b21lclBob25lXCI6IHRoaXMuc3RhdGUuY3VzdG9tZXJQaG9uZSxcclxuICAgICAgICAgICAgICAgIFwidHlwZVwiOiB0aGlzLnByb3BzLmtpbmQsXHJcbiAgICAgICAgICAgICAgICBcImlkXCI6IHRoaXMuc3RhdGUuaWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpZDogXCJcIixcclxuICAgICAgICAgICAgbmFtZTogXCJcIixcclxuICAgICAgICAgICAgcHJpY2U6IFwiXCIsXHJcbiAgICAgICAgICAgIGN1c3RvbWVyUGhvbmU6IFwiXCIsXHJcbiAgICAgICAgICAgIGN1c3RvbWVyTmFtZTogXCJcIixcclxuICAgICAgICAgICAgcHJvZHVjdHM6IFtdXHJcbiAgICAgICAgfSlcclxuICAgICAgICBCaWxsU2VydmljZS51cGRhdGVCaWxsKGRhdGEsdGhpcy5wcm9wcy50b2tlbikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCd1cGRhdGUgaMOzYSDEkcahbiB0aMOgbmggY8O0bmcnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgYWxlcnQoJ3VwZGF0ZSBow7NhIMSRxqFuIGLhu4sgbOG7l2knKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IFtldmVudC50YXJnZXQubmFtZV06IGV2ZW50LnRhcmdldC52YWx1ZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZVByb2R1Y3QgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGV2ZW50LnRhcmdldC5uYW1lKVxyXG4gICAgICAgIGxldCBwcm9kdWN0TGlzdCA9IHRoaXMuc3RhdGUucHJvZHVjdHM7XHJcbiAgICAgICAgcHJvZHVjdExpc3RbZXZlbnQudGFyZ2V0Lm5hbWVdLmFtb3VudCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcHJvZHVjdHM6IHByb2R1Y3RMaXN0XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhZGRQcm9kdWN0ID0gKCkgPT4ge1xyXG4gICAgICAgIGxldCBwcm9kdWN0ID0ge1xyXG4gICAgICAgICAgICBpZFByb2R1Y3Q6IG51bGwsXHJcbiAgICAgICAgICAgIG5hbWVQcm9kdWN0OiAnJyxcclxuICAgICAgICAgICAgYW1vdW50OiAwXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcHJvZHVjdExpc3QgPSB0aGlzLnN0YXRlLnByb2R1Y3RzO1xyXG4gICAgICAgIHByb2R1Y3RMaXN0LnB1c2gocHJvZHVjdCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHByb2R1Y3RzOiBwcm9kdWN0TGlzdFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlUHJvZHVjdCA9ICgpID0+IHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGV2ZW50LnRhcmdldC5uYW1lKVxyXG4gICAgICAgIGxldCBwcm9kdWN0TGlzdCA9IHRoaXMuc3RhdGUucHJvZHVjdHM7XHJcbiAgICAgICAgcHJvZHVjdExpc3Quc3BsaWNlKGV2ZW50LnRhcmdldC5uYW1lLCAxKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcHJvZHVjdHM6IHByb2R1Y3RMaXN0XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzaG93TWVudSA9IChldmVudCwgaW5kZXgpID0+IHtcclxuICAgICAgICBsZXQgcHJvZHVjdExpc3QgPSB0aGlzLnN0YXRlLnByb2R1Y3RzO1xyXG4gICAgICAgIHByb2R1Y3RMaXN0W2luZGV4XS5uYW1lUHJvZHVjdCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICBwcm9kdWN0TGlzdFtpbmRleF0uaWRQcm9kdWN0ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcHJvZHVjdHM6IHByb2R1Y3RMaXN0LFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5nZXRQcm9kdWN0KGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZUVudGVySGFuZGxlciA9IChldmVudCwgaW5kZXgpID0+IHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuZ2V0UHJvZHVjdCh0aGlzLnN0YXRlLnByb2R1Y3RzW2luZGV4XS5uYW1lUHJvZHVjdCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHNob3dNZW51OiB0cnVlLFxyXG4gICAgICAgICAgICBpbmRleFNob3dEcm9wRG93bjogaW5kZXhcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlTGVhdmVIYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHNob3dNZW51OiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNob2ljZUl0ZW0gPSAoZXZlbnQsIGVJdGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2codGhpcy5zdGF0ZS5pdGVtcyk7XHJcbiAgICAgICAgbGV0IHByb2R1Y3RMaXN0ID0gdGhpcy5zdGF0ZS5wcm9kdWN0cztcclxuICAgICAgICBwcm9kdWN0TGlzdFtpbmRleF0ubmFtZVByb2R1Y3QgPSBlSXRlbS5uYW1lO1xyXG4gICAgICAgIHByb2R1Y3RMaXN0W2luZGV4XS5pZFByb2R1Y3QgPSBlSXRlbS5pZDtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGVJdGVtLmlkKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgcHJvZHVjdHM6IHByb2R1Y3RMaXN0LFxyXG4gICAgICAgICAgICBzaG93TWVudTogZmFsc2VcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGgyPlVwZGF0ZSBIw7NhIMSQxqFuPC9oMj5cclxuICAgICAgICAgICAgICAgIDx0YWJsZT5cclxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUeXBlOlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cIm5hbWVcIiB2YWx1ZT17dGhpcy5wcm9wcy5raW5kfSBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZX0gZGlzYWJsZWQvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaWQgPT09IFwiXCIgPyBudWxsIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiaWRcIiB2YWx1ZT17dGhpcy5zdGF0ZS5pZH0gb25DaGFuZ2U9e3RoaXMub25DaGFuZ2V9IGRpc2FibGVkLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUw6puIEjDs2EgxJDGoW46XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwibmFtZVwiIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9IG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFTDqm4gS2jDoWNoIEjDoG5nOlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImN1c3RvbWVyTmFtZVwiIHZhbHVlPXt0aGlzLnN0YXRlLmN1c3RvbWVyTmFtZX0gb25DaGFuZ2U9e3RoaXMub25DaGFuZ2V9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0RUIEtow6FjaCBIw6BuZzpcclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJjdXN0b21lclBob25lXCIgdmFsdWU9e3RoaXMuc3RhdGUuY3VzdG9tZXJQaG9uZX0gb25DaGFuZ2U9e3RoaXMub25DaGFuZ2V9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR2nDoTpcclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJwcmljZVwiIHZhbHVlPXt0aGlzLnN0YXRlLnByaWNlfSBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcblxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGJvcmRlcj1cIjFcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5Uw6puIFNQPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD5T4buRIGzGsOG7o25nPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUucHJvZHVjdHMubWFwKChlSXRlbSwga2V5UHJvZHVjdCkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgb25Nb3VzZUVudGVyPXsoZXZ0KSA9PiB0aGlzLm9uTW91c2VFbnRlckhhbmRsZXIoZXZ0LCBrZXlQcm9kdWN0KX0gb25Nb3VzZUxlYXZlPXt0aGlzLm9uTW91c2VMZWF2ZUhhbmRsZXJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgc3R5bGU9e3RoaXMuc3RhdGUucHJvZHVjdHNba2V5UHJvZHVjdF0uaWRQcm9kdWN0ICE9IG51bGwgPyBpbnB1dFN0eWxlQ29ycmVjdCA6IGlucHV0U3R5bGVJbkNvcnJlY3R9IHR5cGU9XCJ0ZXh0XCIgb25DaGFuZ2U9eyhldnQpID0+IHRoaXMuc2hvd01lbnUoZXZ0LCBrZXlQcm9kdWN0KX0gdmFsdWU9e3RoaXMuc3RhdGUucHJvZHVjdHNba2V5UHJvZHVjdF0ubmFtZVByb2R1Y3R9ID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9pbnB1dD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zaG93TWVudSAmJiBrZXlQcm9kdWN0ID09IHRoaXMuc3RhdGUuaW5kZXhTaG93RHJvcERvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZW51XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3R5bGUganN4PntgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1lbnUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAjRkZGRkZGO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaXRlbSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLml0ZW1zLm1hcCgoZUl0ZW0sIGtleUl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpdGVtXCIgb25DbGljaz17KGV2dCkgPT4gdGhpcy5jaG9pY2VJdGVtKGV2dCwgZUl0ZW0sIGtleVByb2R1Y3QpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2VJdGVtLm5hbWV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9e2tleVByb2R1Y3R9IHZhbHVlPXt0aGlzLnN0YXRlLnByb2R1Y3RzW2tleVByb2R1Y3RdLmFtb3VudH0gb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VQcm9kdWN0fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4td2FybmluZ1wiIG5hbWU9e2tleVByb2R1Y3R9IG9uQ2xpY2s9e3RoaXMuZGVsZXRlUHJvZHVjdH0+WMOzYTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gc3R5bGU9e3ttYXJnaW5Ub3A6XCIxMHB4XCJ9fSB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiBvbkNsaWNrPXt0aGlzLmFkZFByb2R1Y3R9PlRow6ptIFPhuqNuIFBo4bqpbTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPGJyPjwvYnI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIHN0eWxlPXt7bWFyZ2luVG9wOlwiMTBweFwifX0gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCIgb25DbGljaz17dGhpcy5zdWJtaXRQcm9kdWN0fT5TdWJtaXQ8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXYgPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn0iXX0= */\\n/*@ sourceURL=D:\\\\project\\\\nextJS\\\\ThuBong\\\\components\\\\AddBillPopup.js */\"), _this2.state.items.map(function (eItem, keyItem) {\n          return React.createElement(\"div\", {\n            onClick: function onClick(evt) {\n              return _this2.choiceItem(evt, eItem, keyProduct);\n            },\n            className: \"jsx-62654344\" + \" \" + \"item\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 321\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"jsx-62654344\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 322\n            },\n            __self: this\n          }, eItem.name));\n        })) : null), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 332\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          name: keyProduct,\n          value: _this2.state.products[keyProduct].amount,\n          onChange: _this2.onChangeProduct,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 335\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"button\",\n          class: \"btn btn-warning\",\n          name: keyProduct,\n          onClick: _this2.deleteProduct,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 336\n          },\n          __self: this\n        }, \"X\\xF3a\")));\n      }))), React.createElement(\"button\", {\n        style: {\n          marginTop: \"10px\"\n        },\n        type: \"button\",\n        class: \"btn btn-primary\",\n        onClick: this.addProduct,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, \"Th\\xEAm S\\u1EA3n Ph\\u1EA9m\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        style: {\n          marginTop: \"10px\"\n        },\n        type: \"button\",\n        class: \"btn btn-primary\",\n        onClick: this.submitProduct,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, \"Submit\"));\n    }\n  }]);\n\n  return AddBillPopup;\n}(React.Component);\n\nexport { AddBillPopup as default };","map":{"version":3,"sources":["D:\\project\\nextJS\\ThuBong\\components\\AddBillPopup.js"],"names":["BillService","ProductService","inputStyleCorrect","background","inputStyleInCorrect","AddBillPopup","props","text","trim","productList","state","products","map","item","idProduct","alert","checkString","amount","checkNumber","cItem","push","name","price","data","id","customerName","customerPhone","kind","console","log","setState","updateBill","token","then","result","catch","error","event","target","value","product","nameProduct","splice","index","getProduct","preventDefault","showMenu","indexShowDropDown","eItem","items","billProduct","getProductByName","json","content","number","isnum","test","onChange","keyProduct","evt","onMouseEnterHandler","onMouseLeaveHandler","keyItem","choiceItem","onChangeProduct","deleteProduct","marginTop","addProduct","submitProduct","React","Component"],"mappings":"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","sourcesContent":["import BillService from '../service/BillService.js';\r\nimport ProductService from '../service/ProductService.js';\r\n\r\nconst inputStyleCorrect = {\r\n    background: \"white\"\r\n}\r\n\r\nconst inputStyleInCorrect = {\r\n    background: \"red\"\r\n}\r\n\r\nexport default class AddBillPopup extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            id: \"\",\r\n            name: \"\",\r\n            products: [],\r\n            amount: \"\",\r\n            price: \"\",\r\n            showMenu: false,\r\n            indexShowDropDown: -1,\r\n            items: [],\r\n            customerName: \"\",\r\n            customerPhone: \"\"\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        let billProduct = []\r\n        if(this.props.item == null){\r\n            return;\r\n        }\r\n        if(this.props.item.billProduct != null){\r\n            this.props.item.billProduct.map((item) => {\r\n                let eItem = {\r\n                    idProduct: item.product.id,\r\n                    nameProduct: item.product.name,\r\n                    amount: item.amount\r\n                }\r\n                billProduct.push(eItem);\r\n            })\r\n        }\r\n        if(this.props.item != null){\r\n            this.setState({\r\n                id: this.props.item.id,\r\n                name: this.props.item.name,\r\n                price: this.props.item.price,\r\n                customerName: this.props.item.customerName,\r\n                customerPhone: this.props.item.customerPhone,\r\n                products : billProduct\r\n            })\r\n        }\r\n    }\r\n\r\n    async getProduct(name) {\r\n        const json = await ProductService.getProductByName(name,this.props.token);\r\n        //console.log(json.content);\r\n        this.setState({ items: json.content });\r\n    }\r\n\r\n\r\n    checkNumber(number) {\r\n        if (number == null) {\r\n            return false;\r\n        }\r\n        let isnum = /^\\d+$/.test(number);\r\n        return isnum;\r\n    }\r\n\r\n    checkString = text => {\r\n        if (text == null) {\r\n            return false;\r\n        }\r\n        if (text.trim() === \"\") {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    submitProduct = () => {\r\n\r\n        let productList = [];\r\n        this.state.products.map((item) => {\r\n            if (item.idProduct == null) {\r\n                alert('cần chọn sản phẩm đúng');\r\n                return;\r\n            }\r\n\r\n            if (!this.checkString(item.amount + \"\")) {\r\n                alert('cần điền đầy đủ số lượng mỗi loại của sản phẩm');\r\n                return;\r\n            }\r\n\r\n            if (!this.checkNumber(item.amount)) {\r\n                alert('số lượng cần là chữ số');\r\n                return;\r\n            }\r\n\r\n            let cItem = {\r\n                \"amount\": item.amount,\r\n                \"id\": item.idProduct\r\n            }\r\n\r\n            productList.push(cItem);\r\n        })\r\n\r\n        //console.log(productList);\r\n\r\n        if (!this.checkString(this.state.name) || !this.checkString(this.state.price+\"\")) {\r\n            alert('cần điền đầy đủ các trường');\r\n            return;\r\n        }\r\n\r\n        if (!this.checkNumber(this.state.price)) {\r\n            alert('giá cần là chữ số');\r\n            return;\r\n        }\r\n        let data = null;\r\n        if(this.state.id == null || this.state.id == \"\"){\r\n            data = {\r\n                \"name\": this.state.name,\r\n                \"price\": this.state.price,\r\n                \"listProduct\": productList,\r\n                \"customerName\": this.state.customerName,\r\n                \"customerPhone\": this.state.customerPhone,\r\n                \"type\": this.props.kind\r\n            }\r\n        }else{\r\n            data = {\r\n                \"name\": this.state.name,\r\n                \"price\": this.state.price,\r\n                \"listProduct\": productList,\r\n                \"customerName\": this.state.customerName,\r\n                \"customerPhone\": this.state.customerPhone,\r\n                \"type\": this.props.kind,\r\n                \"id\": this.state.id\r\n            }\r\n        }\r\n\r\n        console.log(data);\r\n\r\n        this.setState({\r\n            id: \"\",\r\n            name: \"\",\r\n            price: \"\",\r\n            customerPhone: \"\",\r\n            customerName: \"\",\r\n            products: []\r\n        })\r\n        BillService.updateBill(data,this.props.token).then(function (result) {\r\n            alert('update hóa đơn thành công');\r\n            console.log(result);\r\n        }).catch(function (error) {\r\n            alert('update hóa đơn bị lỗi');\r\n        })\r\n    }\r\n\r\n    onChange = (event) => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    }\r\n\r\n    onChangeProduct = (event) => {\r\n        //console.log(event.target.name)\r\n        let productList = this.state.products;\r\n        productList[event.target.name].amount = event.target.value;\r\n        this.setState({\r\n            products: productList\r\n        })\r\n    }\r\n\r\n    addProduct = () => {\r\n        let product = {\r\n            idProduct: null,\r\n            nameProduct: '',\r\n            amount: 0\r\n        }\r\n\r\n        let productList = this.state.products;\r\n        productList.push(product);\r\n        this.setState({\r\n            products: productList\r\n        })\r\n    }\r\n\r\n    deleteProduct = () => {\r\n        //console.log(event.target.name)\r\n        let productList = this.state.products;\r\n        productList.splice(event.target.name, 1);\r\n        this.setState({\r\n            products: productList\r\n        })\r\n    }\r\n\r\n    showMenu = (event, index) => {\r\n        let productList = this.state.products;\r\n        productList[index].nameProduct = event.target.value;\r\n        productList[index].idProduct = null;\r\n        this.setState({\r\n            products: productList,\r\n        })\r\n        this.getProduct(event.target.value);\r\n    }\r\n\r\n    onMouseEnterHandler = (event, index) => {\r\n        event.preventDefault();\r\n        this.getProduct(this.state.products[index].nameProduct);\r\n        this.setState({\r\n            showMenu: true,\r\n            indexShowDropDown: index\r\n        });\r\n    }\r\n\r\n    onMouseLeaveHandler = (event) => {\r\n        event.preventDefault();\r\n\r\n        this.setState({\r\n            showMenu: false\r\n        });\r\n    }\r\n\r\n    choiceItem = (event, eItem, index) => {\r\n        //console.log(this.state.items);\r\n        let productList = this.state.products;\r\n        productList[index].nameProduct = eItem.name;\r\n        productList[index].idProduct = eItem.id;\r\n        //console.log(eItem.id);\r\n        this.setState({\r\n            products: productList,\r\n            showMenu: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h2>Update Hóa Đơn</h2>\r\n                <table>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                Type:\r\n                    </td>\r\n                            <td>\r\n                                <input type=\"text\" name=\"name\" value={this.props.kind} onChange={this.onChange} disabled/>\r\n                            </td>\r\n                        </tr>\r\n                        {this.state.id === \"\" ? null : (\r\n                        <tr>\r\n                            <td>\r\n                                ID:\r\n                    </td>\r\n                            <td>\r\n                                <input type=\"text\" name=\"id\" value={this.state.id} onChange={this.onChange} disabled/>\r\n                            </td>\r\n                        </tr>\r\n                        )}\r\n                        <tr>\r\n                            <td>\r\n                                Tên Hóa Đơn:\r\n                    </td>\r\n                            <td>\r\n                                <input type=\"text\" name=\"name\" value={this.state.name} onChange={this.onChange} />\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                Tên Khách Hàng:\r\n                    </td>\r\n                            <td>\r\n                                <input type=\"text\" name=\"customerName\" value={this.state.customerName} onChange={this.onChange} />\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                SDT Khách Hàng:\r\n                    </td>\r\n                            <td>\r\n                                <input type=\"text\" name=\"customerPhone\" value={this.state.customerPhone} onChange={this.onChange} />\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                Giá:\r\n                    </td>\r\n                            <td>\r\n                                <input type=\"text\" name=\"price\" value={this.state.price} onChange={this.onChange} />\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n\r\n                <table border=\"1\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>Tên SP</td>\r\n                            <td>Số lượng</td>\r\n                        </tr>\r\n                        {this.state.products.map((eItem, keyProduct) =>\r\n                            <tr>\r\n                                <td onMouseEnter={(evt) => this.onMouseEnterHandler(evt, keyProduct)} onMouseLeave={this.onMouseLeaveHandler}>\r\n                                    <input style={this.state.products[keyProduct].idProduct != null ? inputStyleCorrect : inputStyleInCorrect} type=\"text\" onChange={(evt) => this.showMenu(evt, keyProduct)} value={this.state.products[keyProduct].nameProduct} >\r\n                                    </input>\r\n                                    {\r\n                                        this.state.showMenu && keyProduct == this.state.indexShowDropDown\r\n                                            ? (\r\n                                                <div className=\"menu\">\r\n                                                    <style jsx>{`\r\n                                                        .menu {\r\n                                                            background: #FFFFFF;\r\n                                                            position: absolute;\r\n                                                            z-index: 1;\r\n                                                            width: 30%;\r\n                                                        },\r\n                                                        .item {\r\n                                                            width: 100%;\r\n                                                        }\r\n                                                    `}</style>\r\n                                                    {this.state.items.map((eItem, keyItem) =>\r\n                                                        <div className=\"item\" onClick={(evt) => this.choiceItem(evt, eItem, keyProduct)}>\r\n                                                            <span>{eItem.name}</span>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            )\r\n                                            : (\r\n                                                null\r\n                                            )\r\n                                    }\r\n                                </td>\r\n                                <td>\r\n                                    <input type=\"text\" name={keyProduct} value={this.state.products[keyProduct].amount} onChange={this.onChangeProduct} />\r\n                                </td>\r\n                                <td>\r\n                                    <button type=\"button\" class=\"btn btn-warning\" name={keyProduct} onClick={this.deleteProduct}>Xóa</button>\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n\r\n                <button style={{marginTop:\"10px\"}} type=\"button\" class=\"btn btn-primary\" onClick={this.addProduct}>Thêm Sản Phẩm</button>\r\n                <br></br>\r\n                <button style={{marginTop:\"10px\"}} type=\"button\" class=\"btn btn-primary\" onClick={this.submitProduct}>Submit</button>\r\n            </div >\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}