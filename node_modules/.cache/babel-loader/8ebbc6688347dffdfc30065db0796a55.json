{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\project\\\\nextJS\\\\ThuBong\\\\pages\\\\product.js\";\nimport React from \"react\";\nimport Layout from '../components/MyLayout.js';\nimport ProductRow from '../components/ProductRow.js';\nimport Popup from \"reactjs-popup\";\nimport AddProductPopup from '../components/AddProductPopup.js';\nimport ProductService from '../service/ProductService.js';\nimport fetch from 'isomorphic-unfetch';\nimport Router from 'next/router';\nimport jsCookie from 'js-cookie';\nimport Pagination from \"react-pagination-library\";\nimport \"react-pagination-library/build/css/index.css\";\nvar tableStyle = {\n  margin: \"0 auto\",\n  border: '1px solid #DDD'\n};\nvar tableDivStyle = {\n  padding: 20,\n  textAlign: \"center\",\n  border: '1px solid #DDD'\n};\n\nvar Product =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Product, _React$Component);\n\n  function Product(props) {\n    var _this;\n\n    _classCallCheck(this, Product);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Product).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"refreshData\", function () {\n      _this.getProduct(_this.state.currentPage);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeCurrentPage\", function (numPage) {\n      _this.changeCurrentPageAsync.bind(_assertThisInitialized(_this))(numPage);\n    });\n\n    _this.state = {\n      products: [],\n      open: false,\n      item: null,\n      token: \"\",\n      pageSize: 5,\n      currentPage: 1,\n      totalPages: 1\n    };\n    _this.openModal = _this.openModal.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Product, [{\n    key: \"openModal\",\n    value: function openModal() {\n      this.setState({\n        item: null,\n        open: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.getProduct(this.state.currentPage);\n      this.setState({\n        open: false\n      });\n    }\n  }, {\n    key: \"getProduct\",\n    value: function () {\n      var _getProduct = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(pageNum) {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return ProductService.getProduct(this.state.token, pageNum, this.state.pageSize);\n\n              case 2:\n                json = _context.sent;\n\n                if (json.content != null) {\n                  this.setState({\n                    products: json.content\n                  });\n                }\n\n                if (pageNum == 1) {\n                  this.setState({\n                    totalPages: json.totalPages\n                  });\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getProduct(_x) {\n        return _getProduct.apply(this, arguments);\n      }\n\n      return getProduct;\n    }()\n  }, {\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var tokenLogin;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                tokenLogin = jsCookie.get('token');\n\n                if (tokenLogin === \"\") {\n                  Router.push('/');\n                }\n\n                _context2.next = 4;\n                return this.setState({\n                  token: tokenLogin\n                });\n\n              case 4:\n                _context2.next = 6;\n                return this.getProduct(this.state.currentPage);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"changeCurrentPageAsync\",\n    value: function () {\n      var _changeCurrentPageAsync = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(numPage) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.setState({\n                  currentPage: numPage\n                });\n\n              case 2:\n                this.getProduct(this.state.currentPage);\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function changeCurrentPageAsync(_x2) {\n        return _changeCurrentPageAsync.apply(this, arguments);\n      }\n\n      return changeCurrentPageAsync;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"S\\u1EA3n Ph\\u1EA9m\"), React.createElement(\"div\", {\n        style: tableDivStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        border: \"1\",\n        style: tableStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"STT\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"\\u1EA2nh\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"T\\xEAn\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"S\\u1ED1 l\\u01B0\\u1EE3ng\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Gi\\xE1(K VND)\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Ng\\u01B0\\u1EDDi t\\u1EA1o\")), this.state.products.map(function (eItem, key) {\n        return React.createElement(ProductRow, {\n          key: key,\n          token: _this2.state.token,\n          refreshDataMethod: _this2.refreshData,\n          item: eItem,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        });\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        currentPage: this.state.currentPage,\n        totalPages: this.state.totalPages,\n        changeCurrentPage: this.changeCurrentPage,\n        theme: \"bottom-border\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }))), React.createElement(\"button\", {\n        className: \"button\",\n        class: \"btn btn-primary\",\n        onClick: this.openModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Th\\xEAm s\\u1EA3n ph\\u1EA9m\"), React.createElement(Popup, {\n        open: this.state.open,\n        closeOnDocumentClick: true,\n        onClose: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(AddProductPopup, {\n        token: this.state.token,\n        item: this.state.item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Product;\n}(React.Component);\n\nexport { Product as default };","map":{"version":3,"sources":["D:\\project\\nextJS\\ThuBong\\pages\\product.js"],"names":["Layout","ProductRow","Popup","AddProductPopup","ProductService","fetch","Router","jsCookie","Pagination","tableStyle","margin","border","tableDivStyle","padding","textAlign","Product","props","getProduct","state","currentPage","numPage","changeCurrentPageAsync","bind","products","open","item","token","pageSize","totalPages","openModal","closeModal","setState","pageNum","json","content","tokenLogin","get","push","map","eItem","key","refreshData","changeCurrentPage","React","Component"],"mappings":"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","sourcesContent":["import Layout from '../components/MyLayout.js';\r\nimport ProductRow from '../components/ProductRow.js';\r\nimport Popup from \"reactjs-popup\";\r\nimport AddProductPopup from '../components/AddProductPopup.js';\r\nimport ProductService from '../service/ProductService.js';\r\nimport fetch from 'isomorphic-unfetch'\r\nimport Router from 'next/router'\r\nimport jsCookie from 'js-cookie';\r\nimport Pagination from \"react-pagination-library\";\r\nimport \"react-pagination-library/build/css/index.css\";\r\n\r\nconst tableStyle = {\r\n    margin: \"0 auto\",\r\n    border: '1px solid #DDD',\r\n}\r\n\r\nconst tableDivStyle = {\r\n    padding: 20,\r\n    textAlign: \"center\",\r\n    border: '1px solid #DDD',\r\n}\r\n\r\n\r\nexport default class Product extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = ({\r\n            products: [],\r\n            open: false,\r\n            item: null,\r\n            token: \"\",\r\n            pageSize: 5,\r\n            currentPage: 1,\r\n            totalPages: 1\r\n        })\r\n        this.openModal = this.openModal.bind(this);\r\n        this.closeModal = this.closeModal.bind(this);\r\n    }\r\n\r\n    openModal() {\r\n        this.setState({ item: null, open: true });\r\n    }\r\n\r\n    closeModal() {\r\n        this.getProduct(this.state.currentPage);\r\n        this.setState({ open: false });\r\n    }\r\n\r\n    async getProduct(pageNum) {\r\n        const json = await ProductService.getProduct(this.state.token, pageNum, this.state.pageSize);\r\n        if (json.content != null) {\r\n            this.setState({ products: json.content });\r\n        }\r\n        if (pageNum == 1) {\r\n            this.setState({ totalPages: json.totalPages });\r\n        }\r\n    }\r\n\r\n    refreshData = () => {\r\n        this.getProduct(this.state.currentPage);\r\n    }\r\n\r\n    async componentWillMount() {\r\n        var tokenLogin = jsCookie.get('token');\r\n        if (tokenLogin === \"\") {\r\n            Router.push('/');\r\n        }\r\n        await this.setState({\r\n            token: tokenLogin\r\n        })\r\n        await this.getProduct(this.state.currentPage);\r\n    }\r\n\r\n    async changeCurrentPageAsync(numPage) {\r\n        await this.setState({ currentPage: numPage });\r\n        this.getProduct(this.state.currentPage);\r\n    }\r\n\r\n    changeCurrentPage = numPage => {\r\n        this.changeCurrentPageAsync.bind(this)(numPage);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Layout>\r\n                <h1>Sản Phẩm</h1>\r\n                <div style={tableDivStyle}>\r\n                    <table border=\"1\" style={tableStyle}>\r\n                        <tbody>\r\n                            <tr >\r\n                                <th>\r\n                                    STT\r\n                        </th>\r\n                                <th>\r\n                                    Ảnh\r\n                        </th>\r\n                                <th>\r\n                                    Tên\r\n                        </th>\r\n                                <th>\r\n                                    Số lượng\r\n                        </th>\r\n                                <th>\r\n                                    Giá(K VND)\r\n                        </th>\r\n                                <th>\r\n                                    Người tạo\r\n                        </th>\r\n                            </tr>\r\n                            {this.state.products.map((eItem, key) =>\r\n                                <ProductRow key={key} token={this.state.token} refreshDataMethod={this.refreshData} item={eItem} />\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                    <div>\r\n                        <Pagination\r\n                            currentPage={this.state.currentPage}\r\n                            totalPages={this.state.totalPages}\r\n                            changeCurrentPage={this.changeCurrentPage}\r\n                            theme=\"bottom-border\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <button className=\"button\" class=\"btn btn-primary\" onClick={this.openModal}>\r\n                    Thêm sản phẩm\r\n                </button>\r\n                <Popup\r\n                    open={this.state.open}\r\n                    closeOnDocumentClick\r\n                    onClose={this.closeModal}\r\n                >\r\n                    <AddProductPopup token={this.state.token} item={this.state.item} />\r\n                </Popup>\r\n            </Layout>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}