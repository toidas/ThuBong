{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\project\\\\nextJS\\\\ThuBong\\\\pages\\\\user_info.js\";\nimport React from \"react\";\nimport Layout from '../components/MyLayout.js';\nimport Link from 'next/link';\nimport UserService from '../service/UserService.js';\nimport Environment from '../config/Environment.js';\nimport Router from 'next/router';\nimport jsCookie from 'js-cookie';\nimport Head from 'next/head';\nimport Popup from \"reactjs-popup\";\nimport ChangePassPopup from \"../components/ChangePassPopup.js\";\nvar passwordDiv = {\n  marginTop: \"10px\"\n};\nvar formDiv = {\n  marginLeft: \"50px\"\n};\nvar inputCss = {\n  marginLeft: \"10px\"\n};\n\nvar UserInfo =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UserInfo, _React$Component);\n\n  function UserInfo(props) {\n    var _this;\n\n    _classCallCheck(this, UserInfo);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserInfo).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"checkString\", function (text) {\n      if (text.trim() === \"\") {\n        return false;\n      }\n\n      return true;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changePass\", function () {});\n\n    _this.state = {\n      username: \"\",\n      name: \"\",\n      email: \"\",\n      phoneNumber: \"\"\n    };\n    _this.openModal = _this.openModal.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(UserInfo, [{\n    key: \"openModal\",\n    value: function openModal() {\n      this.setState({\n        open: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        open: false\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var tokenLogin;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                tokenLogin = jsCookie.get('token');\n\n                if (tokenLogin === \"\") {\n                  Router.push('/');\n                }\n\n                _context.next = 4;\n                return this.setState({\n                  token: tokenLogin\n                });\n\n              case 4:\n                _context.next = 6;\n                return this.getUser();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"getUser\",\n    value: function () {\n      var _getUser = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var json;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return UserService.getUser(this.state.token);\n\n              case 2:\n                json = _context2.sent;\n\n                if (!(json.value != null)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                _context2.next = 6;\n                return this.setState({\n                  username: json.value.username,\n                  name: json.value.name,\n                  email: json.value.email,\n                  phoneNumber: json.value.phoneNumber\n                });\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getUser() {\n        return _getUser.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: \"editUser\",\n    value: function () {\n      var _editUser = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var data, json;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                data = {\n                  name: this.state.name,\n                  email: this.state.email,\n                  phoneNumber: this.state.phoneNumber\n                };\n                _context3.next = 3;\n                return UserService.editUser(data, this.state.token);\n\n              case 3:\n                json = _context3.sent;\n\n                if (json.code == 200) {\n                  alert(\"thay đổi thông tin cá nhân thành công\");\n                } else {\n                  alert(\"lỗi thay đổi thông tin cá nhân\");\n                }\n\n                _context3.next = 7;\n                return this.getUser();\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function editUser() {\n        return _editUser.apply(this, arguments);\n      }\n\n      return editUser;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: formDiv,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Head, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"title\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Andy Mum\"), React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n        integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n        crossorigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(\"script\", {\n        src: \"https://code.jquery.com/jquery-3.3.1.slim.min.js\",\n        integrity: \"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\",\n        crossorigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(\"script\", {\n        src: \"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\",\n        integrity: \"sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1\",\n        crossorigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"script\", {\n        src: \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\",\n        integrity: \"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM\",\n        crossorigin: \"anonymous\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \"Th\\xF4ng tin c\\xE1 nh\\xE2n\"), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Username :\", React.createElement(\"input\", {\n        style: inputCss,\n        type: \"text\",\n        name: \"username\",\n        value: this.state.username,\n        onChange: this.onChange,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: passwordDiv,\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Name :\", React.createElement(\"input\", {\n        style: inputCss,\n        type: \"text\",\n        name: \"name\",\n        value: this.state.name,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: passwordDiv,\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Email :\", React.createElement(\"input\", {\n        style: inputCss,\n        type: \"text\",\n        name: \"email\",\n        value: this.state.email,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: passwordDiv,\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Phone :\", React.createElement(\"input\", {\n        style: inputCss,\n        type: \"text\",\n        name: \"phoneNumber\",\n        value: this.state.phoneNumber,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: passwordDiv,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-primary\",\n        onClick: this.editUser.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Submit\"), React.createElement(\"button\", {\n        style: {\n          marginLeft: '20px'\n        },\n        type: \"button\",\n        class: \"btn btn-primary\",\n        onClick: this.openModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Change Pass\")))), React.createElement(Popup, {\n        open: this.state.open,\n        closeOnDocumentClick: true,\n        onClose: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(ChangePassPopup, {\n        token: this.state.token,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return UserInfo;\n}(React.Component);\n\nexport { UserInfo as default };","map":{"version":3,"sources":["D:\\project\\nextJS\\ThuBong\\pages\\user_info.js"],"names":["Layout","Link","UserService","Environment","Router","jsCookie","Head","Popup","ChangePassPopup","passwordDiv","marginTop","formDiv","marginLeft","inputCss","UserInfo","props","text","trim","event","setState","target","name","value","state","username","email","phoneNumber","openModal","bind","closeModal","open","tokenLogin","get","push","token","getUser","json","data","editUser","code","alert","onChange","React","Component"],"mappings":"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","sourcesContent":["import Layout from '../components/MyLayout.js';\r\nimport Link from 'next/link';\r\nimport UserService from '../service/UserService.js';\r\nimport Environment from '../config/Environment.js';\r\nimport Router from 'next/router'\r\nimport jsCookie from 'js-cookie';\r\nimport Head from 'next/head';\r\nimport Popup from \"reactjs-popup\";\r\nimport ChangePassPopup from \"../components/ChangePassPopup.js\"\r\n\r\nconst passwordDiv = {\r\n    marginTop: \"10px\"\r\n}\r\n\r\nconst formDiv = {\r\n    marginLeft: \"50px\"\r\n}\r\n\r\nconst inputCss = {\r\n    marginLeft: \"10px\"\r\n}\r\n\r\nexport default class UserInfo extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = ({\r\n            username: \"\",\r\n            name: \"\",\r\n            email: \"\",\r\n            phoneNumber: \"\"\r\n        })\r\n        this.openModal = this.openModal.bind(this);\r\n        this.closeModal = this.closeModal.bind(this);\r\n    }\r\n\r\n    openModal() {\r\n        this.setState({ open: true });\r\n    }\r\n\r\n    closeModal() {\r\n        this.setState({ open: false });\r\n    }\r\n\r\n    checkString = text => {\r\n        if (text.trim() === \"\") {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    onChange = (event) => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    }\r\n\r\n    async componentWillMount() {\r\n        var tokenLogin = jsCookie.get('token');\r\n        if (tokenLogin === \"\") {\r\n            Router.push('/');\r\n        }\r\n        await this.setState({\r\n            token: tokenLogin\r\n        })\r\n        await this.getUser();\r\n    }\r\n\r\n    async getUser(){\r\n        const json = await UserService.getUser(this.state.token);\r\n        if(json.value != null){\r\n            await this.setState({\r\n                username: json.value.username,\r\n                name: json.value.name,\r\n                email: json.value.email,\r\n                phoneNumber: json.value.phoneNumber\r\n            })\r\n        }\r\n    }\r\n\r\n    async editUser(){\r\n        let data = {\r\n            name: this.state.name,\r\n            email: this.state.email,\r\n            phoneNumber: this.state.phoneNumber\r\n        }\r\n        const json = await UserService.editUser(data,this.state.token);\r\n        if(json.code == 200){\r\n            alert(\"thay đổi thông tin cá nhân thành công\");\r\n        }else{\r\n            alert(\"lỗi thay đổi thông tin cá nhân\");\r\n        }\r\n        await this.getUser();\r\n    }\r\n\r\n    changePass = () => {\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Layout>\r\n                <div style={formDiv}>\r\n                    <Head>\r\n                        <title>Andy Mum</title>\r\n                        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\" />\r\n                        <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" crossorigin=\"anonymous\"></script>\r\n                        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\" integrity=\"sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1\" crossorigin=\"anonymous\"></script>\r\n                        <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\" integrity=\"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM\" crossorigin=\"anonymous\"></script>\r\n                    </Head>\r\n                    <br></br>\r\n                    <h1>Thông tin cá nhân</h1>\r\n                    <form>\r\n                        <div class=\"form-group\">\r\n                            Username :\r\n            <input style={inputCss} type=\"text\" name=\"username\" value={this.state.username} onChange={this.onChange} disabled/>\r\n                        </div>\r\n                        <div style={passwordDiv} class=\"form-group\">\r\n                            Name :\r\n            <input style={inputCss} type=\"text\" name=\"name\" value={this.state.name} onChange={this.onChange} />\r\n                        </div>\r\n                        <div style={passwordDiv} class=\"form-group\">\r\n                            Email :\r\n            <input style={inputCss} type=\"text\" name=\"email\" value={this.state.email} onChange={this.onChange} />\r\n                        </div>\r\n                        <div style={passwordDiv} class=\"form-group\">\r\n                            Phone :\r\n            <input style={inputCss} type=\"text\" name=\"phoneNumber\" value={this.state.phoneNumber} onChange={this.onChange} />\r\n                        </div>\r\n                        <div style={passwordDiv} >\r\n                            <button type=\"button\" class=\"btn btn-primary\" onClick={this.editUser.bind(this)}>Submit</button>\r\n                            <button style={{marginLeft : '20px'}} type=\"button\" class=\"btn btn-primary\" onClick={this.openModal}>Change Pass</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <Popup\r\n                    open={this.state.open}\r\n                    closeOnDocumentClick\r\n                    onClose={this.closeModal}\r\n                >\r\n                    <ChangePassPopup token={this.state.token} />\r\n                </Popup>\r\n            </Layout>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}