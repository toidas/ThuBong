{"version":3,"file":"static/webpack/static\\development\\pages\\sell.js.bad6b5bcc112e4ded66a.hot-update.js","sources":["webpack:///./pages/sell.js"],"sourcesContent":["import Layout from '../components/MyLayout.js';\r\nimport BillRow from '../components/BillRow.js';\r\nimport Popup from \"reactjs-popup\";\r\nimport AddBillPopup from '../components/AddBillPopup.js';\r\nimport BillService from '../service/BillService.js';\r\nimport fetch from 'isomorphic-unfetch'\r\nimport Router from 'next/router'\r\nimport jsCookie from 'js-cookie';\r\nimport Pagination from \"react-pagination-library\";\r\n//import \"react-pagination-library/build/css/index.css\";\r\n\r\nconst tableStyle = {\r\n    margin: \"0 auto\",\r\n    border: '1px solid #DDD',\r\n}\r\n\r\nconst tableDivStyle = {\r\n    padding: 20,\r\n    textAlign: \"center\",\r\n    border: '1px solid #DDD',\r\n}\r\n\r\nexport default class Bill extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = ({\r\n            bills: [],\r\n            open: false,\r\n            item: null,\r\n            kind: \"sell\",\r\n            token: \"\",\r\n            pageSize: 2,\r\n            currentPage: 1,\r\n            totalPages: 1,\r\n            sumPrice: 0\r\n        })\r\n        this.openModal = this.openModal.bind(this);\r\n        this.closeModal = this.closeModal.bind(this);\r\n    }\r\n\r\n    refreshData = () => {\r\n        this.getBill(this.state.currentPage);\r\n    }\r\n\r\n    openModal() {\r\n        this.setState({ item: null, open: true });\r\n    }\r\n    closeModal() {\r\n        this.getBill(this.state.currentPage);\r\n        this.setState({ open: false });\r\n    }\r\n\r\n    async getBill(pageNum) {\r\n        const json = await BillService.getBillByType(this.state.kind, this.state.token, pageNum, this.state.pageSize);\r\n        //const jsonSumPrice = 0;\r\n        const jsonSumPrice = await BillService.getSumPrice(this.state.kind, this.state.token);\r\n        //console.log(json.content);\r\n        if (json.content != null) {\r\n            this.setState({ bills: json.content, sumPrice: jsonSumPrice });\r\n        }\r\n        if (pageNum == 1) {\r\n            this.setState({ totalPages: json.totalPages });\r\n        }\r\n    }\r\n\r\n    async componentWillMount() {\r\n        var tokenLogin = jsCookie.get('token');\r\n        if (tokenLogin === \"\") {\r\n            Router.push('/');\r\n        }\r\n        await this.setState({\r\n            token: tokenLogin\r\n        })\r\n        await this.getBill(this.state.currentPage)\r\n    }\r\n\r\n    async changeCurrentPageAsync(numPage) {\r\n        await this.setState({ currentPage: numPage });\r\n        this.getBill(this.state.currentPage);\r\n    }\r\n\r\n    changeCurrentPage = numPage => {\r\n        this.changeCurrentPageAsync.bind(this)(numPage);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Layout>\r\n                <h1>Hóa Đơn Bán Hàng</h1>\r\n                <div class=\"alert alert-success\" role=\"alert\">\r\n                    Tổng tiền bán được : {this.state.sumPrice}K (VND)\r\n                </div>\r\n                <div style={tableDivStyle}>\r\n                    <table border=\"1\" style={tableStyle}>\r\n                        <tbody>\r\n                            <tr >\r\n                                <th>\r\n                                    STT\r\n                        </th>\r\n                                <th>\r\n                                    Tên Hóa Đơn\r\n                        </th>\r\n                                <th>\r\n                                    Danh sách sản phẩm\r\n                        </th>\r\n                                <th>\r\n                                    Giá (K VND)\r\n                        </th>\r\n                                <th>\r\n                                    Tên Khách Hàng\r\n                        </th>\r\n                                <th>\r\n                                    SĐT Khách Hàng\r\n                        </th>\r\n                                <th>\r\n                                    Người tạo\r\n                        </th>\r\n                                <th>\r\n                                    Ngày tạo\r\n                        </th>\r\n                            </tr>\r\n                            {this.state.bills.map((eItem, key) =>\r\n                                <BillRow key={key} token={this.state.token} kind={this.state.kind} refreshDataMethod={this.refreshData} item={eItem} />\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                    <div>\r\n                        <Pagination\r\n                            currentPage={this.state.currentPage}\r\n                            totalPages={this.state.totalPages}\r\n                            changeCurrentPage={this.changeCurrentPage}\r\n                            theme=\"bottom-border\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <button type=\"button\" class=\"btn btn-primary\" onClick={this.openModal}>\r\n                    Thêm Bill\r\n                </button>\r\n                <Popup\r\n                    open={this.state.open}\r\n                    closeOnDocumentClick\r\n                    onClose={this.closeModal}\r\n                >\r\n                    <AddBillPopup token={this.state.token} kind={this.state.kind} item={this.state.item} />\r\n                </Popup>\r\n            </Layout>\r\n        );\r\n    }\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AAHA;AACA;AAKA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAkBA;AACA;AACA;AApBA;AA2DA;AACA;AACA;AA3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AAdA;AAeA;AACA;;;AAKA;AACA;AAAA;AAAA;AAAA;AACA;;;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;;;AAEA;;;;;;;AACA;AACA;;AADA;;AAEA;AACA;;AADA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AACA;AACA;AACA;;AAAA;AACA;AADA;AACA;;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;AACA;AAAA;AAAA;AACA;;AAAA;AACA;;;;;;;;;;;;;;;;;AAMA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AA7HA;AACA;;;;;A","sourceRoot":""}